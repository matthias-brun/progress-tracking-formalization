<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Antichain</title>
</head>


<body>
<div class="head">
<h1>Theory Antichain</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Antichain
  <span class="keyword2"><span class="keyword">imports</span></span>
    <a href="Auxiliary.html">Auxiliary</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹Antichain›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">incomparable</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">incomparable</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">=</span> <span class="main">(</span><span class="main">∀</span><span class="bound">x</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">.</span> <span class="bound">x</span> <span class="main">≠</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="main">¬</span> <span class="bound">x</span> <span class="main">&lt;</span> <span class="bound">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="bound">y</span> <span class="main">&lt;</span> <span class="bound">x</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">lemma</span></span> incomparable_empty<span class="main">[</span><span class="operator">simp</span><span class="main">,</span> <span class="operator">intro</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"incomparable <span class="main">{}</span>"</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> incomparable_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">typedef</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">overloaded</span></span><span class="main">)</span> <span class="tfree">'sum</span> <span class="main">::</span> <span class="quoted">order</span> antichain <span class="main">=</span>
  <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">A</span> <span class="main">::</span> <span class="tfree">'sum</span> set<span class="main">.</span> finite <span class="bound">A</span> <span class="main">∧</span> incomparable <span class="bound">A</span><span class="main">}</span>"</span></span>
  <span class="keyword2"><span class="keyword">morphisms</span></span> set_antichain antichain
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">setup_lifting</span></span> type_definition_antichain

<span class="keyword1"><span class="command">lift_definition</span></span> member_antichain <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'sum</span> <span class="main">::</span> order <span class="main">⇒</span> <span class="tfree">'sum</span> antichain <span class="main">⇒</span> bool"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword3">(</span>_<span class="keyword3">/ </span><span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> _<span class="keyword3">)</span>"</span> <span class="main">[</span>51<span class="main">,</span> 51<span class="main">]</span> 50<span class="main">)</span> <span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"Set.member"</span></span> <span class="keyword1"><span class="command">.</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">not_member_antichain</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'sum</span> <span class="main">::</span> order <span class="main">⇒</span> <span class="tfree">'sum</span> antichain <span class="main">⇒</span> bool"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword3">(</span>_<span class="keyword3">/ </span><span class="keyword1">∉<span class="hidden">⇩</span><sub>A</sub></span> _<span class="keyword3">)</span>"</span> <span class="main">[</span>51<span class="main">,</span> 51<span class="main">]</span> 50<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="keyword1"><span class="free">∉<span class="hidden">⇩</span><sub>A</sub></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≡</span> <span class="main">¬</span> <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span>"</span></span>

<span class="keyword1"><span class="command">lift_definition</span></span> empty_antichain <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'sum</span> <span class="main">::</span> order antichain"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">{}<span class="hidden">⇩</span><sub>A</sub></span>"</span><span class="main">)</span> <span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="main">{}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">lemma</span></span> mem_antichain_nonempty<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">s</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">A</span> <span class="main">⟹</span> <span class="free">A</span> <span class="main">≠</span> <span class="keyword1">{}<span class="hidden">⇩</span><sub>A</sub></span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="quoted"><span class="quoted">"<span class="free">minimal_antichain</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">=</span> <span class="main">{</span><span class="bound"><span class="bound">x</span></span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">.</span> <span class="main">¬</span><span class="main">(</span><span class="main">∃</span><span class="bound">y</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">.</span> <span class="bound">y</span> <span class="main">&lt;</span> <span class="bound">x</span><span class="main">)</span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">lemma</span></span> in_minimal_antichain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> minimal_antichain <span class="free">A</span> <span class="main">⟷</span> <span class="free">x</span> <span class="main">∈</span> <span class="free">A</span> <span class="main">∧</span> <span class="main">¬</span><span class="main">(</span><span class="main">∃</span><span class="bound">y</span> <span class="main">∈</span> <span class="free">A</span><span class="main">.</span> <span class="bound">y</span> <span class="main">&lt;</span> <span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> minimal_antichain_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> in_antichain_minimal_antichain<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"finite <span class="free">M</span> <span class="main">⟹</span> <span class="free">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> antichain <span class="main">(</span>minimal_antichain <span class="free">M</span><span class="main">)</span> <span class="main">⟷</span> <span class="free">x</span> <span class="main">∈</span> minimal_antichain <span class="free">M</span>"</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> minimal_antichain_def member_antichain.rep_eq<span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">intro</span> conjI iffI<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> antichain_inverse<span class="main">)</span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> incomparable_def<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> antichain_inverse<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> incomparable_def<span class="main">)</span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> antichain_inverse<span class="main">)</span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> incomparable_def<span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> incomparable_minimal_antichain<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"incomparable <span class="main">(</span>minimal_antichain <span class="free">A</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> incomparable_def minimal_antichain_def
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> finite_minimal_antichain<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"finite <span class="free">A</span> <span class="main">⟹</span> finite <span class="main">(</span>minimal_antichain <span class="free">A</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> minimal_antichain_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> finite_set_antichain<span class="main">[</span><span class="operator">simp</span><span class="main">,</span> <span class="operator">intro</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"finite <span class="main">(</span>set_antichain <span class="free">A</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> minimal_antichain_subset<span class="main">:</span> <span class="quoted"><span class="quoted">"minimal_antichain <span class="free">A</span> <span class="main">⊆</span> <span class="free">A</span>"</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> minimal_antichain_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lift_definition</span></span> frontier <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'t</span> <span class="main">::</span> order zmultiset <span class="main">⇒</span> <span class="tfree">'t</span> antichain"</span></span> <span class="keyword2"><span class="keyword">is</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">M</span><span class="main">.</span> minimal_antichain <span class="main">{</span><span class="bound">t</span><span class="main">.</span> zcount <span class="bound">M</span> <span class="bound">t</span> <span class="main">&gt;</span> <span class="main">0</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> finite_subset<span class="main"><span class="main">[</span></span><span class="operator">OF</span> minimal_antichain_subset finite_zcount_pos<span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> member_frontier_pos_zmset<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">t</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> frontier <span class="free">M</span> <span class="main">⟹</span> <span class="main">0</span> <span class="main">&lt;</span> zcount <span class="free">M</span> <span class="free">t</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> frontier_def in_minimal_antichain<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> frontier_comparable_False<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> frontier <span class="free">M</span> <span class="main">⟹</span> <span class="free">y</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> frontier <span class="free">M</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">&lt;</span> <span class="free">y</span> <span class="main">⟹</span> False"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> minimal_antichain_def<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> minimal_antichain_idempotent<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"minimal_antichain <span class="main">(</span>minimal_antichain <span class="free">A</span><span class="main">)</span> <span class="main">=</span> minimal_antichain <span class="free">A</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> minimal_antichain_def<span class="main">)</span>

<span class="keyword1"><span class="command">instantiation</span></span> antichain <span class="main">::</span> <span class="main">(</span><span class="quoted">order</span><span class="main">)</span> <span class="quoted">minus</span> <span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">lift_definition</span></span> <span class="class_parameter">minus_antichain</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span> antichain <span class="main">⇒</span> <span class="tfree">'a</span> antichain <span class="main">⇒</span> <span class="tfree">'a</span> antichain"</span></span> <span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="main">(-)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> incomparable_def<span class="main">)</span>
<span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">..</span></span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">instantiation</span></span> antichain <span class="main">::</span> <span class="main">(</span><span class="quoted">order</span><span class="main">)</span> <span class="quoted">plus</span> <span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">lift_definition</span></span> <span class="class_parameter">plus_antichain</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span> antichain <span class="main">⇒</span> <span class="tfree">'a</span> antichain <span class="main">⇒</span> <span class="tfree">'a</span> antichain"</span></span> <span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">M</span> <span class="bound">N</span><span class="main">.</span> minimal_antichain <span class="main">(</span><span class="bound">M</span> <span class="main">∪</span> <span class="bound">N</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> incomparable_def minimal_antichain_def<span class="main">)</span>
<span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">..</span></span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">lemma</span></span> antichain_add_commute<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">M</span> <span class="main">::</span> <span class="tfree">'a</span> <span class="main">::</span> order antichain<span class="main">)</span> <span class="main">+</span> <span class="free">N</span> <span class="main">=</span> <span class="free">N</span> <span class="main">+</span> <span class="free">M</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> incomparable_def sup_commute<span class="main">)</span>


<span class="keyword1"><span class="command">lift_definition</span></span> filter_antichain <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'sum</span> <span class="main">::</span> order <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'sum</span> antichain <span class="main">⇒</span> <span class="tfree">'sum</span> antichain"</span></span> <span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"Set.filter"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> incomparable_def<span class="main">)</span>

<span class="keyword1"><span class="command">syntax</span></span> <span class="main">(</span>ASCII<span class="main">)</span>
  <span class="quoted">"_ACCollect"</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"pttrn <span class="main">⇒</span> <span class="tfree">'sum</span> <span class="main">::</span> order antichain <span class="main">⇒</span> bool <span class="main">⇒</span> <span class="tfree">'sum</span> antichain"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword3">(1</span><span class="keyword1">{</span>_ <span class="keyword1">:<span class="hidden">⇩</span><sub>A</sub></span> _<span class="keyword1">.</span><span class="keyword3">/ </span>_<span class="keyword1">}</span><span class="keyword3">)</span>"</span><span class="main">)</span>
<span class="keyword1"><span class="command">syntax</span></span>
  <span class="quoted">"_ACCollect"</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"pttrn <span class="main">⇒</span> <span class="tfree">'sum</span> <span class="main">::</span> order antichain <span class="main">⇒</span> bool <span class="main">⇒</span> <span class="tfree">'sum</span> antichain"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword3">(1</span><span class="keyword1">{</span>_ <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> _<span class="keyword1">.</span><span class="keyword3">/ </span>_<span class="keyword1">}</span><span class="keyword3">)</span>"</span><span class="main">)</span>
<span class="keyword1"><span class="command">translations</span></span>
  <span class="quoted">"<span class="main">{</span><span class="free">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">M</span><span class="main">.</span> <span class="free">P</span><span class="main">}</span>"</span> <span class="main">==</span> <span class="quoted">"<span class="keyword1">CONST</span> filter_antichain <span class="main">(</span><span class="main">λ</span><span class="free">x</span><span class="main">.</span> <span class="free">P</span><span class="main">)</span> <span class="free">M</span>"</span>


<span class="keyword1"><span class="command">declare</span></span> empty_antichain.rep_eq<span class="main">[</span><span class="operator">simp</span><span class="main">]</span>

<span class="keyword1"><span class="command">lemma</span></span> minimal_antichain_empty<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"minimal_antichain <span class="main">{}</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> minimal_antichain_def<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> minimal_antichain_singleton<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"minimal_antichain <span class="main">{</span><span class="free">x</span><span class="main">::</span><span class="main">_</span> <span class="main">::</span>order<span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="free">x</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> minimal_antichain_def<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> minimal_antichain_nonempty<span class="main">:</span>
  <span class="quoted"><span class="quoted">"finite <span class="free">A</span> <span class="main">⟹</span> <span class="main">(</span><span class="free">t</span><span class="main">::</span><span class="main">_</span><span class="main">::</span>order<span class="main">)</span> <span class="main">∈</span> <span class="free">A</span> <span class="main">⟹</span> minimal_antichain <span class="free">A</span> <span class="main">≠</span> <span class="main">{}</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> minimal_antichain_def <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> order_finite_set_exists_foundation<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="main"><span class="main">_</span></span> <span class="quoted"><span class="free">t</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> minimal_antichain_member<span class="main">:</span>
  <span class="quoted"><span class="quoted">"finite <span class="free">A</span> <span class="main">⟹</span> <span class="main">(</span><span class="free">t</span><span class="main">::</span><span class="main">_</span><span class="main">::</span>order<span class="main">)</span> <span class="main">∈</span> <span class="free">A</span> <span class="main">⟹</span> <span class="main">∃</span><span class="bound">t'</span><span class="main">.</span> <span class="bound">t'</span> <span class="main">∈</span> minimal_antichain <span class="free">A</span> <span class="main">∧</span> <span class="bound">t'</span> <span class="main">≤</span> <span class="free">t</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> minimal_antichain_def <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> order_finite_set_exists_foundation<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="main"><span class="main">_</span></span> <span class="quoted"><span class="free">t</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> minimal_antichain_union<span class="main">:</span> <span class="quoted"><span class="quoted">"minimal_antichain <span class="main">(</span><span class="main">(</span><span class="free">A</span><span class="main">::</span><span class="main">(</span><span class="main">_</span> <span class="main">::</span> order<span class="main">)</span> set<span class="main">)</span> <span class="main">∪</span> <span class="free">B</span><span class="main">)</span> <span class="main">⊆</span> minimal_antichain <span class="main">(</span>minimal_antichain <span class="free">A</span> <span class="main">∪</span> minimal_antichain <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> minimal_antichain_def<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> ac_Diff_iff<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">c</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">A</span> <span class="main">-</span> <span class="free">B</span> <span class="main">⟷</span> <span class="free">c</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">A</span> <span class="main">∧</span> <span class="free">c</span> <span class="keyword1">∉<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">B</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">lemma</span></span> ac_DiffD2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">c</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">A</span> <span class="main">-</span> <span class="free">B</span> <span class="main">⟹</span> <span class="free">c</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">B</span> <span class="main">⟹</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">lemma</span></span> ac_notin_Diff<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="free">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">A</span> <span class="main">-</span> <span class="free">B</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="free">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">A</span> <span class="main">∨</span> <span class="free">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">B</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">lemma</span></span> ac_eq_iff<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">=</span> <span class="free">B</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="bound">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">A</span> <span class="main">⟷</span> <span class="bound">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> antichain_obtain_foundation<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span>   <span class="quoted"><span class="quoted">"<span class="free">t</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">M</span>"</span></span>
  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">s</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">s</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">M</span> <span class="main">∧</span> <span class="free">s</span> <span class="main">≤</span> <span class="free">t</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">u</span><span class="main">.</span> <span class="bound">u</span><span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span><span class="free">M</span> <span class="main">⟶</span> <span class="main">¬</span> <span class="bound">u</span> <span class="main">&lt;</span> <span class="free">s</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> member_antichain.rep_eq
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">rule</span> order_finite_set_obtain_foundation<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"set_antichain <span class="free"><span class="free"><span class="free">M</span></span></span>"</span></span></span></span> <span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free">t</span></span></span></span></span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span><span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> set_antichain1<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> set_antichain <span class="free">X</span> <span class="main">⟹</span> <span class="free">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">X</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">lemma</span></span> set_antichain2<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>A</sub></span> <span class="free">X</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">∈</span> set_antichain <span class="free">X</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">simp</span>

<span class="keyword2"><span class="keyword">end</span></span></pre>
</body>

</html>